<div class="bg-white rounded-2xl shadow-sm p-6 card-hover sticky top-24">

    <!-- User Profile Summary -->
    <div class="text-center mb-6">

        <% const u = user || locals.user; %>

        <% if (u && u.profileImage && u.profileImage.url) { %>
            <img id="sidebarProfileImage"
                 src="<%= u.profileImage.url %>"
                 class="w-24 h-24 rounded-full object-cover mx-auto border-4 border-white shadow-md">
        <% } else { %>
            <div id="sidebarProfileImage"
                 class="w-24 h-24 rounded-full bg-gradient-to-r from-blue-500 to-emerald-500
                        flex items-center justify-center text-white text-2xl font-bold mx-auto">
                <%= u?.name ? u.name.charAt(0).toUpperCase() : "U" %>
            </div>
        <% } %>

        <h2 class="text-xl font-bold text-gray-900 mt-3">
            <%= u?.name || "User" %>
        </h2>

        <p class="text-gray-600 text-sm"><%= u?.email || "" %></p>

        <p class="text-green-600 text-sm font-medium mt-1">
            <i class="fas fa-check-circle mr-1"></i> Verified
        </p>
    </div>




    <!-- Navigation Menu -->
    <nav class="space-y-2">

        <!-- PROFILE -->
        <a href="/user/profile"
           class="w-full flex items-center gap-3 p-3 rounded-xl transition-all 
           <%= activePage === 'profile' ? 
                'text-blue-600 font-semibold bg-blue-50 border-l-4 border-blue-600' 
                : 'text-gray-700 hover:bg-gray-100' %>">

            <i class="fas fa-user w-5 
                <%= activePage === 'profile' ? 'text-blue-600' : 'text-gray-600' %>"></i>
            <span>Profile Information</span>
        </a>


        <!-- ORDERS -->
        <a href="/user/profile/orders"
           class="w-full flex items-center gap-3 p-3 rounded-xl transition-all 
           <%= activePage === 'orders' ? 
                'text-blue-600 font-semibold bg-blue-50 border-l-4 border-blue-600' 
                : 'text-gray-700 hover:bg-gray-100' %>">

            <i class="fas fa-shopping-bag w-5 
               <%= activePage === 'orders' ? 'text-blue-600' : 'text-gray-600' %>"></i>

            <span>My Orders</span>

            <span class="ml-auto bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">
                <%= ordersCount || 0 %>
            </span>
        </a>


        <!-- ADDRESSES -->
        <a href="/user/profile/addresses"
           class="w-full flex items-center gap-3 p-3 rounded-xl transition-all 
           <%= activePage === 'addresses' ? 
                'text-blue-600 font-semibold bg-blue-50 border-l-4 border-blue-600' 
                : 'text-gray-700 hover:bg-gray-100' %>">

            <i class="fas fa-map-marker-alt w-5 
               <%= activePage === 'addresses' ? 'text-blue-600' : 'text-gray-600' %>"></i>

            <span>Saved Addresses</span>
        </a>


        <!-- WISHLIST -->
        <!-- <a href="/user/profile/wishlist"
           class="w-full flex items-center gap-3 p-3 rounded-xl transition-all 
           <%= activePage === 'wishlist' ? 
                'text-blue-600 font-semibold bg-blue-50 border-l-4 border-blue-600' 
                : 'text-gray-700 hover:bg-gray-100' %>">

            <i class="far fa-heart w-5 
                <%= activePage === 'wishlist' ? 'text-blue-600' : 'text-gray-600' %>"></i>

            <span>Wishlist</span>

            <span class="ml-auto bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">
                <%= wishlistCount || 0 %>
            </span>
        </a> -->


        <a href="/user/profile/wishlist"
   class="w-full flex items-center gap-3 p-3 rounded-xl transition-all 
   <%= activePage === 'wishlist' 
        ? 'text-blue-600 font-semibold bg-blue-50 border-l-4 border-blue-600' 
        : 'text-gray-700 hover:bg-gray-100' %>">

    <i class="far fa-heart w-5 
        <%= activePage === 'wishlist' ? 'text-blue-600' : 'text-gray-600' %>"></i>

    <span>Wishlist</span>

    <span class="ml-auto bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">
        <%= wishlistCount %>
    </span>
</a>



        <!-- SECURITY -->
        <a href="/user/profile/changepassword"
           class="w-full flex items-center gap-3 p-3 rounded-xl transition-all 
           <%= activePage === 'security' ? 
                'text-blue-600 font-semibold bg-blue-50 border-l-4 border-blue-600' 
                : 'text-gray-700 hover:bg-gray-100' %>">

            <i class="fas fa-shield-alt w-5 
               <%= activePage === 'security' ? 'text-blue-600' : 'text-gray-600' %>"></i>

            <span>Security</span>
        </a>


        <!-- NOTIFICATIONS -->
        <a href="/user/profile/notifications"
           class="w-full flex items-center gap-3 p-3 rounded-xl transition-all 
           <%= activePage === 'notifications' ? 
                'text-blue-600 font-semibold bg-blue-50 border-l-4 border-blue-600' 
                : 'text-gray-700 hover:bg-gray-100' %>">

            <i class="fas fa-bell w-5 
                <%= activePage === 'notifications' ? 'text-blue-600' : 'text-gray-600' %>"></i>

            <span>Notifications</span>

            <span class="ml-auto bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full">
                <%= unreadNotifications || 0 %>
            </span>
        </a>

    </nav>
</div>
